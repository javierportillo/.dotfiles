#!/usr/bin/env zsh

if [[ -n "$1" ]]; then
  image_path="$1"
else
  read -r image_path
fi

image_path=$(tr -d '\n' <<< "$image_path")

[[ -z $image_path ]] && echo "path required" && exit 1
[[ ! -f $image_path ]] && echo "path is not a file" && exit 1

config="/home/javier/.config/hypr/hyprpaper.conf"

echo "\$wallpaper = $image_path" > $config
echo "preload = \$wallpaper" >> $config
echo "wallpaper = , \$wallpaper" >> $config

hyprctl -q hyprpaper unload all 
killall hyprpaper

hyprpaper > /dev/null 2>&1 &
disown

notify-send "Wallpaper Changed!"
